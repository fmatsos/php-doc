<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Create a new BulkWriteCommand</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="class.mongodb-driver-bulkwritecommand.html">« MongoDB\Driver\BulkWriteCommand</a></li>
      <li style="float: right;"><a href="mongodb-driver-bulkwritecommand.count.html">MongoDB\Driver\BulkWriteCommand::count »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.mongodb-driver-bulkwritecommand.html">MongoDB\Driver\BulkWriteCommand</a></li>
    <li>Create a new BulkWriteCommand</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mongodb-driver-bulkwritecommand.construct" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">MongoDB\Driver\BulkWriteCommand::__construct</h1>
  <p class="verinfo">(mongodb &gt;=2.1.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\BulkWriteCommand::__construct</span> &mdash; <span class="dc-title">Create a new BulkWriteCommand</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mongodb-driver-bulkwritecommand.construct-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\BulkWriteCommand::__construct</strong></span>(<span class="methodparam"><span class="type"><span class="type"><a href="language.types.null.html" class="type null">?</a></span><span class="type"><a href="language.types.array.html" class="type array">array</a></span></span> <code class="parameter">$options</code><span class="initializer"> = <strong><code><a href="reserved.constants.html#constant.null">null</a></code></strong></span></span>)</div>

  <p class="para rdfs-comment">
   Constructs a new <span class="classname"><a href="class.mongodb-driver-bulkwritecommand.html" class="classname">MongoDB\Driver\BulkWriteCommand</a></span>,
   which may be used to perform many insert, update, and delete operations on
   multiple collections in a single request using the
   <a href="https://www.mongodb.com/docs/manual/reference/command/bulkWrite" class="link external">&raquo;&nbsp;bulkWrite</a>
   command introduced in MongoDB 8.0. This differs from
   <span class="classname"><a href="class.mongodb-driver-bulkwrite.html" class="classname">MongoDB\Driver\BulkWrite</a></span>, which is supported by all
   server versions but limited to a single collection.
  </p>
  <p class="para">
   After all write operations have been added, this object may be executed with
   <span class="methodname"><a href="mongodb-driver-manager.executebulkwritecommand.html" class="methodname">MongoDB\Driver\Manager::executeBulkWriteCommand()</a></span>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-mongodb-driver-bulkwritecommand.construct-parameters">
  <h3 class="title">Parameters</h3>
  <dl>
   
    <dt><code class="parameter">options</code> (<span class="type"><a href="language.types.array.html" class="type array">array</a></span>)</dt>
    <dd>
     <p class="para">
      <table class="doctable table">
       <caption><strong>options</strong></caption>
       
        <thead>
         <tr>
          <th>Option</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
         </tr>

        </thead>

        <tbody class="tbody">
         <tr>
          <td>bypassDocumentValidation</td>
          <td><span class="type"><a href="language.types.boolean.html" class="type bool">bool</a></span></td>
          <td>
           <p class="para">
            If <strong><code><a href="reserved.constants.html#constant.true">true</a></code></strong>, allows insert and update operations to circumvent
            document level validation.
           </p>
          </td>
          <td><strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong></td>
         </tr>

         <tr>
          <td>comment</td>
          <td><span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span></td>
          <td>
           <p class="para">
            An arbitrary comment to help trace the operation through the
            database profiler, currentOp output, and logs.
           </p>
          </td>
         </tr>

         
         <tr>
          <td>let</td>
          <td><span class="type"><span class="type"><a href="language.types.array.html" class="type array">array</a></span>|<span class="type"><a href="language.types.object.html" class="type object">object</a></span></span></td>
          <td>
           <p class="para">
            Map of parameter names and values. Values must be constant or closed expressions that do not reference document fields. Parameters can then be accessed as variables in an aggregate expression context (e.g. <code class="literal">$$var</code>).
           </p>
           <p class="para">
            This option is available in MongoDB 5.0+ and will result in an exception at execution time if specified for an older server version.
           </p>
          </td>
         </tr>


         <tr>
          <td>ordered</td>
          <td><span class="type"><a href="language.types.boolean.html" class="type bool">bool</a></span></td>
          <td>
           <p class="para">
            Whether the operations in this bulk write should be executed in
            the order in which they were specified. If <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong>, writes will
            continue to be executed if an individual write fails. If <strong><code><a href="reserved.constants.html#constant.true">true</a></code></strong>,
            writes will stop executing if an individual write fails.
           </p>
          </td>
          <td><strong><code><a href="reserved.constants.html#constant.true">true</a></code></strong></td>
         </tr>

         <tr>
          <td>verboseResults</td>
          <td><span class="type"><a href="language.types.boolean.html" class="type bool">bool</a></span></td>
          <td>
           <p class="para">
            Whether detailed results for each successful operation should be
            included in the returned
            <span class="classname"><a href="class.mongodb-driver-bulkwritecommandresult.html" class="classname">MongoDB\Driver\BulkWriteCommandResult</a></span>.
           </p>
          </td>
          <td><strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong></td>
         </tr>

        </tbody>
       
      </table>

     </p>
    </dd>
   
  </dl>
 </div>


 <div class="refsect1 errors" id="refsect1-mongodb-driver-bulkwritecommand.construct-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <ul class="simplelist">
   <li>Throws <span class="classname"><a href="class.mongodb-driver-exception-invalidargumentexception.html" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span> on argument parsing errors.</li>
  </ul>
 </div>


 <div class="refsect1 examples" id="refsect1-mongodb-driver-bulkwritecommand.construct-examples">
  <h3 class="title">Examples</h3>
  <div class="example" id="example-1419">
   <p><strong>Example #1 <span class="function"><strong>MongoDB\Driver\BulkWriteCommand::__construct()</strong></span> example</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br />$manager </span><span style="color: #007700">= new </span><span style="color: #0000BB">MongoDB\Driver\Manager</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$bulk </span><span style="color: #007700">= new </span><span style="color: #0000BB">MongoDB\Driver\BulkWriteCommand</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// Delete documents from both collections<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">deleteMany</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.coll_one'</span><span style="color: #007700">, []);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">deleteMany</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.coll_two'</span><span style="color: #007700">, []);<br /><br /></span><span style="color: #FF8000">// Insert documents into two collections<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insertOne</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.coll_one'</span><span style="color: #007700">, [</span><span style="color: #DD0000">'_id' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insertOne</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.coll_two'</span><span style="color: #007700">, [</span><span style="color: #DD0000">'_id' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insertOne</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.coll_two'</span><span style="color: #007700">, [</span><span style="color: #DD0000">'_id' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">// Update a document in "coll_one"<br /></span><span style="color: #0000BB">$bulk</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">updateOne</span><span style="color: #007700">(</span><span style="color: #DD0000">'db.coll_one'</span><span style="color: #007700">, [</span><span style="color: #DD0000">'_id' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">1</span><span style="color: #007700">], [</span><span style="color: #DD0000">'$set' </span><span style="color: #007700">=&gt; [</span><span style="color: #DD0000">'x' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">1</span><span style="color: #007700">]]);<br /><br /></span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$manager</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeBulkWriteCommand</span><span style="color: #007700">(</span><span style="color: #0000BB">$bulk</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Inserted %d document(s)\n"</span><span style="color: #007700">, </span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getInsertedCount</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Updated  %d document(s)\n"</span><span style="color: #007700">, </span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getModifiedCount</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <div class="example-contents"><p>The above example will output:</p></div>
   <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">Inserted 3 document(s)
Updated  1 document(s)</pre>
</div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-mongodb-driver-bulkwritecommand.construct-seealso">
  <h3 class="title">See Also</h3>
  <ul class="simplelist">
   <li><span class="methodname"><a href="mongodb-driver-manager.executebulkwritecommand.html" class="methodname" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeBulkWriteCommand()</a> - Execute write operations using the bulkWrite command</span></li>
   <li><span class="classname"><a href="class.mongodb-driver-bulkwritecommandresult.html" class="classname">MongoDB\Driver\BulkWriteCommandResult</a></span></li>
  </ul>
 </div>


</div></div></div></body></html>